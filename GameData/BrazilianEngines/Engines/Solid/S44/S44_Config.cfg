@PART[*]:HAS[#engineType[S44]]:FOR[RealismOverhaulEngines]
{
    %title = S-44 Kick Motor
    %manufacturer = IAE/Avibras
    %description = "Apresentando o S44 Estrela do CLA, o motor que faz o VLS-1 brilhar como uma constelação nordestina no céu do Programa Espacial Brasileiro! Forjado pelo IAE no calor de Alcântara, esse propulsor de propelente sólido é a alma dos estágios superiores do VLS-1. No segundo estágio, o S44 entrega 33 kN de empuxo com ISP 275s (atmosfera)/295s (vácuo), pesando 0,5 t (0,1 t sem propelente), empurrando 500 kg rumo a órbitas baixas com a energia de um maracatu bem ensaiado. No terceiro estágio, como S44M, ele mantém os 33 kN, mas com ISP 280s/300s e massa de 0,4 t (0,08 t sem propelente), ajustando órbitas com a precisão de um mestre de capoeira. Custa 8.000 fundos (segundo estágio) ou 7.500 fundos (terceiro estágio), aguentando 15 m/s de impacto. Ambos usam propelente sólido composite, que queima como uma fogueira de São João. Cuidado: o S44 já tentou ‘dançar’ sozinho no vácuo, e o Gene Kerman ainda tá revisando os relatórios de 2003. Escolha seu palco – segundo ou terceiro estágio – e ilumine o espaço com o gingado brasileiro!"

    @MODULE[ModuleEngines*]
    {
        %EngineType = SolidBooster
    }

    !MODULE[ModuleEngineConfigs],*{}
    !MODULE[ModuleAlternator],*{}
    !MODULE[ModuleFuelTanks],*{}
    !RESOURCE[*],*{}
    !RESOURCE[SolidFuel],*{}

    @MODULE[ModuleGimbal]
	{
		%gimbalRange = 8.0
		%useGimbalResponseSpeed = true
		%gimbalResponseSpeed = 20
	}

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = S44
        modded = false
        origMass = 0.150

        CONFIG
        {
            name = S44
            description = "O S44 Estrela do CLA é o motor que o IAE criou quando alguém olhou pro céu de Alcântara e disse: ‘Vamos botar uma estrela brasileira na órbita!’ Usado no segundo e terceiro estágios do VLS-1, esse danado de propelente sólido entrega 33 kN de empuxo, como um pandeiro tocando fino pra levar 500 kg de carga até órbitas baixas da Terra, com precisão de fazer inveja a qualquer capoeirista. No segundo estágio, ele brilha com ISP de 275s na atmosfera e 295s no vácuo, pesando 0,5 t (0,1 t sem propelente). Como motor de apogeu no terceiro estágio, ele ajusta órbitas com ISP de 280s/300s e massa de 0,4 t (0,08 t sem propelente). Custa 8.000 fundos (segundo estágio) ou 7.500 fundos (terceiro estágio), porque no RO, precisão tem preço, e aguenta 15 m/s de impacto, testado na Usina Coronel Abner. Numa missão, o Jeb tentou ‘dar um giro’ no S44 com um ajuste manual, e agora o CLA tem uma nova constelação de fumaça chamada ‘Nebulosa do Jeb’. Feito pela IAE/Avibras, esse motor é como um frevo espacial: leve, preciso e com um gingado que ilumina o céu."
            minThrust = 38
            maxThrust = 38
            heatProduction = 80

            ullage = false
            pressureFed = false
            ignitions = 1

            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 0.2
            }
            PROPELLANT
            {
                name = HTPB
                ratio = 1.0
                DrawGauge = True
                resourceFlowMode = STACK_PRIORITY_SEARCH
            }
            atmosphereCurve
            {
                key = 0 300
                key = 1 251
            }
            curveResource = HTPB
            %chamberNominalTemp = 2400
            %maxEngineTemp = 2450
            thrustCurve
            {
                key = 1.00000 1.00000   3.74587   0.00000
                key = 0.97950 0.92000  -0.45237   4.07101
                key = 0.94981 0.93333  -0.25725  -0.44590
                key = 0.88444 0.95000  -0.25274  -0.25274
                key = 0.81792 0.96667   0.18451  -0.24838
                key = 0.74616 0.95333   0.00000   0.18709
                key = 0.72579 0.95333   0.65483   0.00000
                key = 0.69557 0.93333   0.66886   0.66886
                key = 0.63705 0.89333   0.46587   0.69880
                key = 0.58066 0.86667   0.45019   0.48020
                key = 0.53193 0.84444   0.46204   0.46204
                key = 0.48447 0.82222   0.47453   0.47453
                key = 0.43827 0.80000   0.41070   0.48771
                key = 0.38492 0.77778   0.42244   0.42243
                key = 0.33306 0.75556   0.43486   0.43486
                key = 0.28271 0.73333   0.51076   0.44804
                key = 0.24409 0.71333   0.35006   0.52508
                key = 0.18160 0.69111   0.36131   0.36131
                key = 0.12108 0.66889   0.37332   0.37331
                key = 0.06254 0.64667   5.88233   0.38614
                key = 0.04840 0.55733   6.82691   6.81961
                key = 0.03636 0.46800   8.13423   8.11931
                key = 0.02641 0.37867  10.06544  10.02963
                key = 0.01856 0.28933  13.22173  13.11034
                key = 0.01282 0.20000   7.80920  18.89608
                key = 0.00890 0.16667   9.37684   9.35696
                key = 0.00570 0.13333  16.18469  11.68894
                key = 0.00249 0.06667  13.87259  30.05728
                key = 0.00062 0.03333  28.14741  25.76339
                key = 0.00000 0.01000   0.00000  68.48464
            }
        }
    }

    MODULE
    {
        name = ModuleFuelTanks
        volume = 472.71 // Volume para 7180 kg de HTPB (densidade 1,772 kg/litro)
        type = HTPB
        basemass = -1
        TANK
        {
            name = HTPB
            amount = 472.71
            maxAmount = 472.71
        }
    }
}

@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[S44]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
    TESTFLIGHT
    {
        name = S44
        testedBurnTime = 100 // Margem de segurança
        ratedBurnTime = 80 // Tempo de queima calculado
        safeOverburn = true

        ignitionReliabilityStart = 0.880000
        ignitionReliabilityEnd = 0.980000

        cycleReliabilityStart = 0.900000
        cycleReliabilityEnd = 0.990000

        reliabilityDataRateMultiplier = 1
    }
    @MODULE[ModuleEngineConfigs]
    {
        @CONFIG[S44]
        {
            %ratedBurnTime = #$/TESTFLIGHT[S44]/ratedBurnTime$
        }
    }
}
