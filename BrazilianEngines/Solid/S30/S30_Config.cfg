@PART[*]:HAS[#engineType[S30]]:FOR[RealismOverhaulEngines]
{
    %title = S-30 SRB
    %manufacturer = IAE/Avibras
    %description = "Apresentando o S30/S31 Tempestade Brasileira, a dupla que faz o céu de Kerbin tremer e o Jeb pular de alegria (ou de pânico, dependendo do dia)! Forjados pela IAE com o suor do CLA, esses motores são o orgulho do Programa Espacial Brasileiro. O S30 Grito do Pampa é o brutamontes, com 102 kN de empuxo e 1,2 t, perfeito pra lançar o Sonda III e IV com 300 kg de carga até 600 km, com ISP 210s (atmosfera)/230s (vácuo) – é como um churrasco gaúcho, barulhento e inesquecível. Já o S31 Fúria do Atlântico, com 110 kN de empuxo e só 1,0 t, é a evolução que sobe até 700 km com 250 kg, com ISP 220s/240s, como uma onda que chega com estilo e potência. Ambos usam propelente sólido composite, que queima com a energia de um carnaval em Salvador. O S30 custa 1.500 fundos e aguenta 18 m/s de impacto; o S31 sai por 1.600 fundos e resiste a 15 m/s. Cuidado: esses motores já tentaram 'passear' pelo Atlântico nos anos 60, e o Gene Kerman ainda tá contando os prejuízos. Escolha seu veneno – o grito ou a fúria – e voe com o Brasil rumo às estrelas!"
    @MODULE[ModuleEngines*]
    {
        %EngineType = SolidBooster
    }

    !MODULE[ModuleEngineConfigs],*{}
    !MODULE[ModuleAlternator],*{}
    !RESOURCE,*{}
    !RESOURCE[SolidFuel],*{}

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = S30
        modded = false
        origMass = 0.320 // Massa vazia: 320 kg

        CONFIG
        {
            name = S30
            description = "O S30 Berro do Sertão é o motor que parece que foi projetado por um engenheiro do IAE que tomou um café triplo e gritou: 'Bota tudo que tem de propelente aí, meu filho!' Feito pra ser o booster bruto do Sonda III e IV, ele cospe 102 kN de empuxo no lançamento, como se fosse um boiadeiro empurrando sua nave pra fora do sertão de Kerbin. Carrega propelente sólido composite, que queima com a força de uma quadrilha junina em chamas, levando até 300 kg de carga pra altitudes suborbitais de 600 km. O ISP é 210s na atmosfera e 230s no vácuo – não é o mais refinado, mas quem precisa de finesse quando se tem um berro desses? Pesa 1,2 t, custa 1.500 fundos (porque o CLA não trabalha de graça) e aguenta 18 m/s de impacto, porque foi testado na areia quente da Barreira do Inferno. Dizem que, numa missão, o Jeb ligou o S30 antes do sinal verde e acabou 'lançando' a torre de controle junto – agora ela tem um apelido carinhoso: 'Cratera do Jeb'. Feito pela IAE/Avibras, com um selo de '100% nordestino, 100% explosivo'."
            maxThrust = 102
            heatProduction = 150

            ullage = false
            pressureFed = false
            ignitions = 1

            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 0.5
            }
            PROPELLANT
            {
                name = HTPB
                ratio = 1.0
                DrawGauge = True
                resourceFlowMode = STACK_PRIORITY_SEARCH
            }
            atmosphereCurve
            {
                key = 0 230 // Isp ajustado: 305 s no vácuo
                key = 1 210 // ~10% menor na atmosfera
            }
            curveResource = HTPB
            %chamberNominalTemp = 2400
            %maxEngineTemp = 2450
            thrustCurve
            {
                key = 1.00000 1.00000   3.74587   0.00000
                key = 0.97950 0.92000  -0.45237   4.07101
                key = 0.94981 0.93333  -0.25725  -0.44590
                key = 0.88444 0.95000  -0.25274  -0.25274
                key = 0.81792 0.96667   0.18451  -0.24838
                key = 0.74616 0.95333   0.00000   0.18709
                key = 0.72579 0.95333   0.65483   0.00000
                key = 0.69557 0.93333   0.66886   0.66886
                key = 0.63705 0.89333   0.46587   0.69880
                key = 0.58066 0.86667   0.45019   0.48020
                key = 0.53193 0.84444   0.46204   0.46204
                key = 0.48447 0.82222   0.47453   0.47453
                key = 0.43827 0.80000   0.41070   0.48771
                key = 0.38492 0.77778   0.42244   0.42243
                key = 0.33306 0.75556   0.43486   0.43486
                key = 0.28271 0.73333   0.51076   0.44804
                key = 0.24409 0.71333   0.35006   0.52508
                key = 0.18160 0.69111   0.36131   0.36131
                key = 0.12108 0.66889   0.37332   0.37331
                key = 0.06254 0.64667   5.88233   0.38614
                key = 0.04840 0.55733   6.82691   6.81961
                key = 0.03636 0.46800   8.13423   8.11931
                key = 0.02641 0.37867  10.06544  10.02963
                key = 0.01856 0.28933  13.22173  13.11034
                key = 0.01282 0.20000   7.80920  18.89608
                key = 0.00890 0.16667   9.37684   9.35696
                key = 0.00570 0.13333  16.18469  11.68894
                key = 0.00249 0.06667  13.87259  30.05728
                key = 0.00062 0.03333  28.14741  25.76339
                key = 0.00000 0.01000   0.00000  68.48464
            }
        }
        CONFIG
        {
            name = S31
            description = "O S31 Fúria do Atlântico é o que acontece quando o IAE olha pro S30 e pensa: 'E se a gente botasse mais potência, menos peso e um toque de malandragem?' Desenvolvido pro Sonda IV, esse monstro leve entrega 110 kN de empuxo no lançamento, como uma onda gigante de Alcântara empurrando sua nave até 700 km com cargas de 250 kg. Seu propelente sólido composite queima com a precisão de um passista de escola de samba, com ISP de 220s na atmosfera e 240s no vácuo – mais eficiente que o primo S30, porque o futuro é agora, meu chapa! Pesa só 1,0 t, custa 1.600 fundos (tecnologia de ponta não é barata) e aguenta 15 m/s de impacto, porque é forte, mas não curte quedas bruscas. Numa missão, a Valentina testou o S31 em overdrive e jura que viu o Mun piscando pra ela. Feito pela IAE, esse motor é tipo um axé dos anos 90: potente, vibrante e pronto pra fazer história."
            maxThrust = 110.2
            heatProduction = 100
			massMult = 0.85

            ullage = false
            pressureFed = false
            ignitions = 1

            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 0.3
            }
            PROPELLANT
            {
                name = HTPB
                ratio = 1.0
                DrawGauge = True
                resourceFlowMode = STACK_PRIORITY_SEARCH
            }
            atmosphereCurve
            {
                key = 0 235
                key = 1 215
            }
            curveResource = HTPB
            %chamberNominalTemp = 2400
            %maxEngineTemp = 2450
            thrustCurve
            {
                key = 1.00000 1.00000   3.74587   0.00000
                key = 0.97950 0.92000  -0.45237   4.07101
                key = 0.94981 0.93333  -0.25725  -0.44590
                key = 0.88444 0.95000  -0.25274  -0.25274
                key = 0.81792 0.96667   0.18451  -0.24838
                key = 0.74616 0.95333   0.00000   0.18709
                key = 0.72579 0.95333   0.65483   0.00000
                key = 0.69557 0.93333   0.66886   0.66886
                key = 0.63705 0.89333   0.46587   0.69880
                key = 0.58066 0.86667   0.45019   0.48020
                key = 0.53193 0.84444   0.46204   0.46204
                key = 0.48447 0.82222   0.47453   0.47453
                key = 0.43827 0.80000   0.41070   0.48771
                key = 0.38492 0.77778   0.42244   0.42243
                key = 0.33306 0.75556   0.43486   0.43486
                key = 0.28271 0.73333   0.51076   0.44804
                key = 0.24409 0.71333   0.35006   0.52508
                key = 0.18160 0.69111   0.36131   0.36131
                key = 0.12108 0.66889   0.37332   0.37331
                key = 0.06254 0.64667   5.88233   0.38614
                key = 0.04840 0.55733   6.82691   6.81961
                key = 0.03636 0.46800   8.13423   8.11931
                key = 0.02641 0.37867  10.06544  10.02963
                key = 0.01856 0.28933  13.22173  13.11034
                key = 0.01282 0.20000   7.80920  18.89608
                key = 0.00890 0.16667   9.37684   9.35696
                key = 0.00570 0.13333  16.18469  11.68894
                key = 0.00249 0.06667  13.87259  30.05728
                key = 0.00062 0.03333  28.14741  25.76339
                key = 0.00000 0.01000   0.00000  68.48464
            }
        }
    }
    MODULE
    {
        name = ModuleFuelTanks
        volume = 383.7 // Volume para 7180 kg de HTPB (densidade 1,772 kg/litro)
        type = Solid
        basemass = -1
        TANK
        {
            name = HTPB
            amount = 383.7
            maxAmount = 383.7
        }
    }
}
@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[S30]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
    TESTFLIGHT
    {
        name = S30
        testedBurnTime = 20 // Margem de segurança
        ratedBurnTime = 15 // Tempo de queima padrão
        safeOverburn = true
        ignitionReliabilityStart = 0.750000
        ignitionReliabilityEnd = 0.950000
        ignitionDynPresFailMultiplier = 0.1
        cycleReliabilityStart = 0.820000
        cycleReliabilityEnd = 0.970000
        reliabilityDataRateMultiplier = 1
    }
    @MODULE[ModuleEngineConfigs]
    {
        @CONFIG[S30]
        {
            %ratedBurnTime = #$/TESTFLIGHT[S30]/ratedBurnTime$
        }
    }
}
@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[S31]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
    TESTFLIGHT
    {
        name = S31
        testedBurnTime = 32 // Margem de segurança
        ratedBurnTime = 25 // Tempo de queima padrão
        safeOverburn = true
        ignitionReliabilityStart = 0.780000
        ignitionReliabilityEnd = 0.950000
        ignitionDynPresFailMultiplier = 0.1
        cycleReliabilityStart = 0.820000
        cycleReliabilityEnd = 0.970000
        reliabilityDataRateMultiplier = 1
    }
    @MODULE[ModuleEngineConfigs]
    {
        @CONFIG[S31]
        {
            %ratedBurnTime = #$/TESTFLIGHT[S31]/ratedBurnTime$
        }
    }
}
